<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>One HTML Page Challenge</title>
        <link
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
            crossorigin="anonymous" />
        <link rel="stylesheet" href="styles.css" />
    </head>
    <body>
        <div class="container-fluid">
            <br />
            <div class="card">
                <div class="card-body">
                    <div class="jumbotron">
                        <img src="logo.png" alt="VK Мессенджер" class="logo" />
                        <p><b>VK Мессенджер</b></p>
                        <hr class="my-4" />
                        <p>VK Мессенджер — бесплатное и быстрое приложение для общения. Будьте на связи с друзьями и знакомыми в чатах и звонках.</p>
                        <ul class='text-center'>
                            <li class='text-left'>Обменивайтесь в мессенджере текстовыми и голосовыми сообщениями</li>
                            <li class='text-left'>Звоните без ограничений по времени и числу участников</li>
                            <li class='text-left'>Контакты в быстром доступе: из телефонной книги и ВКонтакте</li>
                            <li class='text-left'>Создавайте фантомные чаты и отправляйте исчезающие сообщения</li>
                            <li class='text-left'>Получайте бизнес-уведомления в мессенджере</li>
                        </ul>
                        <b>Лёгкий и быстрый в любых условиях</b>
                    </div>

                    <div id="list"></div>
                </div>
            </div>
        </div>
        <br />

        <script>
            var list = document.getElementById("list");

            function initBridge() {
                vkBridge
                    .send("VKWebAppInit")
                    .then((data) => {
                        if (data.result) {
                            vkBridge
                                .send("VKWebAppGetAuthToken", {
                                    app_id: 53535801,
                                    scope: "friends,photos,status"
                                })
                                .then((data) => {
                                    if (data.access_token) {
                                        var hr = document.createElement("hr");
                                        list.appendChild(hr);

                                        var card = document.createElement("div");
                                        card.className = "card";

                                        var body = document.createElement("div");
                                        body.className = "card-body";
                                        card.appendChild(body);

                                        const cardTitle = document.createElement("h5");
                                        const cardTitleNode = document.createTextNode(data.access_token);
                                        cardTitle.className = "card-title";
                                        cardTitle.appendChild(cardTitleNode);
                                        body.appendChild(cardTitle);

                                        list.appendChild(card);

                                    }
                                })
                                .catch((error) => { });
                        } else {
                        }
                    })
                    .catch((error) => { });
            }
        </script>

        <script src="https://vk.com/js/api/openapi.js?169" onload="initOpenApi()" type="text/javascript"></script>
        <script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js" onload="initBridge()" type="text/javascript"></script>
    </body>
</html>
